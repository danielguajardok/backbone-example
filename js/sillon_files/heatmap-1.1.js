var heatmap={size:null,pagePosition:null,behavior:null,body:null,serviceName:"/Services/PageClickService.svc/ajaxEndpoint/Create",onResultCallback:null,onErrorCallback:null,defaultBehavior:null,enable:false,enableSetted:false,behaviors:{MarkLinksOnly:function(a){$("a").click(function(b){heatmap.manageClick(b,a)})},MarkAll:function(a){$("body").click(function(b){heatmap.manageClick(b,a)})}},pagePositions:{RIGHT:"right",CENTER:"center",LEFT:"left"},onReceivedPageClick:function(response){if(this.onResultCallback!=null){var result=eval("("+response+")").d;this.onResultCallback(result)}},onError:function(a){if(this.onErrorCallback!=null){this.onErrorCallback(a)}},init:function(b,a){if(this.size==null){this.size=this.getMaxSizeFromDivAndTables()}if(this.pagePosition==null){this.pagePosition=this.pagePositions.CENTER}if(this.behavior==null){this.defaultBehavior=this.behaviors.MarkAll;this.setBehavior(this.defaultBehavior,a)}if(!this.enableSetted){if(b!=false&&b!=true){this.enable=false}else{this.enable=b}}},traceControl:function(c,a){var b=$("#"+c);if(b!=null&&b!=undefined){b.click(function(d){heatmap.manageControlClick(b,a,d)})}},setBehavior:function(a,b){if(a==undefined||a==null){this.behavior=this.defaultBehavior}else{this.behavior=a}if(b==undefined){this.behavior(null)}else{this.behavior(b)}},setEnable:function(a){if(a!=false&&a!=true){this.enable=false}else{this.enable=a}this.enableSetted=true},getOffsetX:function(){var a=0;var b=5;if(this.pagePosition==this.pagePositions.CENTER){a=window.Math.round(($("body")[0].scrollWidth-(this.size+b))/2)}if(this.pagePosition==this.pagePositions.LEFT){a=0}if(this.pagePosition==this.pagePositions.RIGHT){a=window.Math.round($("body")[0].scrollWidth-(this.size+b))}return a},save:function(a){if(this.serviceName!=null&&a!=null){this.execute(this.serviceName,a)}},getMaxSizeFromDivAndTables:function(){var b=$("div, table");var c=0;for(var d=0;d<b.length;d++){var a=Number(b[d].width);if(a>c){c=a}}return c},manageClick:function(c,e){if(!this.enable){return}var d=new Object();d.X=c.pageX-this.getOffsetX();d.Y=c.pageY;if(this.pagePosition==this.pagePositions.CENTER||this.pagePosition==this.pagePositions.RIGHT){if(d.X<0){if(e!=null){e(null)}return}}if(this.pagePosition==this.pagePositions.CENTER||this.pagePosition==this.pagePositions.LEFT){if(d.X>this.size+5){if(e!=null){e(null)}return}}if(d==null){return}var b={"pageClick":d};var a=JSON.stringify(b);this.save(a);if(e!=undefined&&e!=null){e(d)}},manageControlClick:function(d,b,e){if(b==null||b==undefined){b=d.attr("id")}var f=new Object();f.X=e.pageX-d.offset().left;f.Y=e.pageY-d.offset().top;if(f.X<0||f.Y<0){return}f.ControlName=b;var c={"pageClick":f};var a=JSON.stringify(c);this.save(a)},execute:function(a,b){$.ajaxSettings.contentType="application/json";$.post(a,b,this.onReceivedPageClick)}};